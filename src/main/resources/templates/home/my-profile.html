<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rent a Car</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
          integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <style>
        #title-main {
            display: flex;
            justify-content: space-between;
            background-color: darkgray;
            align-items: center;
            width: 100%;
            border-bottom: 1px solid #ddd;
            padding-left: 50px;
            padding-right: 50px;
        }

        #title-main p {
            margin-left: 20px;
            font-size: 20px;
        }

        #user-menu-toggle {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        #user-menu-toggle i {
            margin-left: 5px;
        }

        #mega-menu {
            position: absolute;
            top: 75px;
            right: 0;
            width: 250px;
            background-color: white;
            border: 1px solid #ddd;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
        }

        #mega-menu a {
            padding: 5px;
            text-decoration: none;
            color: black;
            border-bottom: 1px solid #ddd;
            display: flex;
            align-items: center;
        }

        #mega-menu a p {
            display: flex;
            font-size: 15px;
            align-items: center;
            margin: 0 0 0 10px;
        }

        #mega-menu a i {
            font-size: 10px;
        }

        #mega-menu a:hover {
            background-color: #f0f0f0;
        }

        #mega-menu a:last-child {
            border-bottom: none;
        }

        #title-main .hidden {
            display: none;
        }

        #title-main .title-main-left {
            display: flex;
        }

        #title-main .title-main-left i {
            font-size: 50px;
            color: white;
            margin-top: 10px;
        }

        #title-main .title-main-left h1 {
            margin-left: 25px;
            margin-top: 5px;
            font-weight: bolder;
            color: white;
            font-size: 50px;
        }

        #title-main .title-main-right {
            display: flex;
        }

        .divider {
            margin: 0 50px;
            border-left: 1px solid #ccc;
        }


        #title-main .title-main-right #about-us {
            color: white;
            text-decoration: none;
            margin: 10px 15px 0;
        }

        #title-main .title-main-right #user-menu-toggle {
            color: white;
            display: flex;
        }

        #title-main .title-main-right #user-menu-toggle p {
            margin-right: 10px;
            margin-top: 5px;
        }

        #title-main .title-main-right #user-menu-toggle i {
            margin-top: -10px;
        }

        .content .content-header {
            margin-left: 50px;
            margin-top: 25px;
        }

        .content .content-header span {
            margin-left: 10px;
            margin-right: 10px;
        }

        .content .content-header a {
            color: black;
        }

        .content .content-header a:hover {
            text-decoration: none;
            color: #007bff;
        }

        .content .content-body h2 {
            margin: 25px 0 25px 50px;
        }

        .content .content-body section {
            margin-left: 30px;
            margin-bottom: 25px;
        }

        .content .content-body section ul li a {
            color: black;
        }

        .content .content-body section ul li a span {
            margin-left: 15px;
            margin-right: 15px;
        }

        .content .content-body section form .row {
            margin-bottom: 20px;
        }

        .content .content-body section form .row input[type="file"] {
            border: 1px solid #ccc;
            padding: 3px;
            border-radius: 4px;
        }

        .content .content-body section .row button {
            width: 100px;
        }

        .footer {
            display: flex;
            justify-content: space-between;
            padding: 20px;
            background-color: darkgray;
            border-top: 1px solid #e1e1e1;
        }

        .footer-section {
            flex: 1;
            padding: 0 15px;
        }

        .footer-section h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .footer-section ul {
            list-style-type: none;
            padding: 0;
        }

        .footer-section ul li {
            margin-bottom: 10px;
        }

        .footer-section a {
            text-decoration: none;
            color: black;
            font-size: 10px
        }

        .footer-section a:hover {
            text-decoration: underline;
        }

    </style>
</head>
<body>
<div id="title-main">
    <div class="title-main-left">
        <i class="fa-solid fa-car"></i>
        <h1>Rent a car today!</h1>
    </div>
    <div class="title-main-right">
        <div class="divider"></div>
        <a id="about-us" href="#">ABOUT US</a>
        <div class="divider"></div>
        <div id="user-menu-toggle">
            <p>Welcome</p>
            <i class="fa-solid fa-user"></i>
            <i class="fa-solid fa-caret-down"></i>
        </div>
        <div id="mega-menu" class="hidden">
            <a th:href="@{/my-profile}">
                <p>My profile</p>
            </a>
            <a href="#">
                <p>My Bookings</p>
            </a>
            <a href="#">
                <p>My wallet</p>
            </a>
            <a href="#">
                <p>Log out</p>
            </a>
        </div>
    </div>
</div>

<div class="content">
    <div class="content-header">
        <a th:href="@{/home-page}">Home</a>
        <span> > </span>
        <a th:href="@{/my-profile}">My Profile</a>
    </div>

    <div class="content-body">
        <h2>My Profile</h2>
        <section class="container">
            <ul class="nav nav-tabs" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="personal-info-tab" data-toggle="tab" href="#personal-info" role="tab"
                       aria-controls="personal-info" aria-selected="true"><span>Personal Information</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="security-tab" data-toggle="tab" href="#security" role="tab"
                       aria-controls="security" aria-selected="false"><span>Security</span></a>
                </li>
            </ul>
            <div class="tab-content p-3 border border-top-0" id="carDetailsTabContent">
                <div class="tab-pane fade show active" id="personal-info" role="tabpanel"
                     aria-labelledby="personal-info-tab">
                    <div class="container">
                        <div class="row">
                            <div class="col">
                                <form th:action="@{/updateProfile}" method="post" enctype="multipart/form-data">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label for="driverName">Full Name: <span
                                                    class="text-danger">*</span></label>
                                            <input type="text" class="form-control" id="driverName" name="name"
                                                   placeholder="Full Name" th:value="${profile.name}">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="driverDob">Date of birth: <span
                                                    class="text-danger">*</span></label>
                                            <input type="date" class="form-control" id="driverDob" name="dateOfBirth"
                                                   placeholder="dd/mm/yyyy" th:value="${profile.dateOfBirth}">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label for="driverPhone">Phone number: <span
                                                    class="text-danger">*</span></label>
                                            <input type="text" class="form-control" id="driverPhone" name="phoneNo"
                                                   placeholder="Phone number" th:value="${profile.phoneNo}">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="driverEmail">Email address: <span
                                                    class="text-danger">*</span></label>
                                            <input type="email" class="form-control" id="driverEmail" name="email"
                                                   placeholder="Email address" th:value="${profile.email}">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label for="driverId">National ID No.: <span
                                                    class="text-danger">*</span></label>
                                            <input type="text" class="form-control" id="driverId" name="nationalIdNo"
                                                   placeholder="National ID No." th:value="${profile.nationalIdNo}">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="driverLicense">Driving license:</label>
                                            <input type="file" class="form-control-file" id="driverLicense"
                                                   name="drivingLicense" th:value="${profile.drivingLicense}">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-8">
                                            <select id="citySelect" name="city" class="form-control mb-2">
                                                <option value="">Select City/Province</option>
                                            </select>
                                            <select id="districtSelect" name="district" class="form-control mb-2" disabled>
                                                <option value="">Select District</option>
                                            </select>
                                            <select id="wardSelect" name="ward" class="form-control mb-2" disabled>
                                                <option value="">Select Ward</option>
                                            </select>
                                            <input type="text" id="houseNumber" name="houseNumber" class="form-control mb-2" placeholder="House number" th:value="${houseNumber}">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12 text-center" style="margin-top: 20px">
                                            <button type="button" class="btn btn-secondary"><span>Discard</span>
                                            </button>
                                            <button type="submit" class="btn btn-primary"><span>Save</span></button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="security" role="tabpanel" aria-labelledby="security-tab">
                    <div class="container">
                        <div class="row">
                            <div class="col">
                                <form th:action="@{/changePassword}" method="post">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label for="newPassword">New Password: <span
                                                    class="text-danger">*</span></label>
                                            <input type="password" class="form-control" id="newPassword" name="newPassword"
                                                   placeholder="New Password">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label for="confirmPassword">Confirm Password: <span
                                                    class="text-danger">*</span></label>
                                            <input type="password" class="form-control" id="confirmPassword" name="confirmPassword"
                                                   placeholder="Confirm Password">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12 text-left" style="margin-top: 20px">
                                            <button type="button" class="btn btn-secondary"><span>Discard</span>
                                            </button>
                                            <button type="submit" class="btn btn-primary"><span>Save</span></button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>

<div class="footer">
    <div class="footer-section">
        <h3>RENT CARS</h3>
        <ul>
            <li><a href="/Homepage"><span style="font-size: 1.4em">Search Cars and Rates</span></a></li>
        </ul>
    </div>
    <div class="footer-section">
        <h3>CUSTOMER ACCESS</h3>
        <ul>
            <li><a href="#"><span style="font-size: 1.4em">Manage My Booking</span></a></li>
            <li><a href="#"><span style="font-size: 1.4em">My Wallet</span></a></li>
            <li><a href="#"><span style="font-size: 1.4em">My Car</span></a></li>
            <li><a href="#"><span style="font-size: 1.4em">Log In</span></a></li>
        </ul>
    </div>
    <div class="footer-section">
        <h3>JOIN US</h3>
        <ul>
            <li><a href="#"><span style="font-size: 1.4em">New User Sign Up</span></a></li>
        </ul>
    </div>
</div>

<script>
    document.getElementById('user-menu-toggle').onclick = function () {
        var menu = document.getElementById('mega-menu')
        menu.classList.toggle('hidden');
    }

    window.onclick = function (event) {
        if (!event.target.matches('#user-menu-toggle, #user-menu-toggle *')) {
            var menu = document.getElementById('mega-menu');
            if (!menu.classList.contains('hidden')) {
                menu.classList.add('hidden');
            }
        }
    }
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const locationData = {
            "Ha Noi": ["Ba Dinh", "Hoan Kiem", "Tay Ho", "Cau Giay", "Dong Da"],
            "Ho Chi Minh": ["District 1", "District 2", "District 3", "Binh Thanh", "Go Vap"],
            "Da Nang": ["Hai Chau", "Thanh Khe", "Lien Chieu", "Ngu Hanh Son", "Son Tra"]
        };

        const citySelect = document.getElementById('citySelect');
        const districtSelect = document.getElementById('districtSelect');
        const wardSelect = document.getElementById('wardSelect');

        // Thêm các tùy chọn cho thành phố
        for (let city in locationData) {
            let option = document.createElement('option');
            option.value = city;
            option.textContent = city;
            citySelect.appendChild(option);
        }

        // Đặt giá trị cho các lựa chọn
        citySelect.value = "${city}";
        citySelect.dispatchEvent(new Event('change'));

        districtSelect.value = "${district}";
        wardSelect.value = "${ward}";

        // Cập nhật quận và phường khi thành phố được chọn
        citySelect.addEventListener('change', function() {
            let selectedCity = this.value;
            districtSelect.innerHTML = '<option value="">Select District</option>';

            if (selectedCity && locationData[selectedCity]) {
                locationData[selectedCity].forEach(district => {
                    let option = document.createElement('option');
                    option.value = district;
                    option.textContent = district;
                    districtSelect.appendChild(option);
                });
                districtSelect.disabled = false;
            } else {
                districtSelect.disabled = true;
            }
            wardSelect.disabled = true;
            wardSelect.innerHTML = '<option value="">Select Ward</option>';
        });

        // Cập nhật phường khi quận được chọn
        districtSelect.addEventListener('change', function() {
            let selectedDistrict = this.value;
            wardSelect.innerHTML = '<option value="">Select Ward</option>';

            if (selectedDistrict) {
                let wards = ["Ward 1", "Ward 2", "Ward 3"]; // Example wards
                wards.forEach(ward => {
                    let option = document.createElement('option');
                    option.value = ward;
                    option.textContent = ward;
                    wardSelect.appendChild(option);
                });
                wardSelect.disabled = false;
            } else {
                wardSelect.disabled = true;
            }
        });
    });
</script>

</body>
</html>